(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{254:function(e,t,A){"use strict";A.r(t);var s=A(1),r=A.n(s),c=A(93),a=A.n(c);A(99);var d=r.a.createContext({}),n=A(2),l=A.n(n);var o=r.a.createContext({}),i=A.p+"static/media/logo.9c439f9f.png",b=A(256),j=A(257),m=A(258),h=A(259),x=A(260),u=A(261),O=A(262),g=A(263),p="data:image/png;base64,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",v=A(18),f=A(0);var N=function(e){let t="border border-gray-300 rounded-full px-3 text-sm font-bold ";return e.outline?t+="text-gray-300 ":t+="bg-gray-300 text-reddit_dark ",Object(f.jsx)("button",{...e,className:t+e.className})},w=A(17);var k=Object(s.createContext)({});var S=function(){const[e,t]=Object(s.useState)("hidden"),[A,r]=Object(s.useState)(""),{setRedirect:c}=Object(s.useContext)(k),a=Object(s.useContext)(d),n=Object(s.useContext)(o);return Object(f.jsx)("header",{className:"w-full bg-reddit_dark p-2",children:Object(f.jsxs)("div",{className:"mx-4 flex relative",children:[Object(f.jsx)(w.b,{to:"/",children:Object(f.jsx)("img",{src:i,alt:"",className:"w-8 h-8 mr-4"})}),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c("/search/"+encodeURIComponent(A))},className:"bg-reddit_dark-brighter px-3 flex rounded-md border border-reddit_border mx-4 flex-grow",children:[Object(f.jsx)(b.a,{className:"text-gray-300 h-6 w-6 mt-1"}),Object(f.jsx)("input",{type:"text",className:"bg-reddit_dark-brighter text-sm p-1 pl-2 pr-0 block focus:outline-none text-white",placeholder:"Search",value:A,onChange:e=>r(e.target.value)})]}),n.username&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{className:"px-2 py-1",children:Object(f.jsx)(j.a,{className:"text-gray-400 w-6 h-6 mx-2"})}),Object(f.jsx)("button",{className:"px-2 py-1",children:Object(f.jsx)(m.a,{className:"text-gray-400 w-6 h-6 mx-2"})}),Object(f.jsx)("button",{className:"px-2 py-1",children:Object(f.jsx)(h.a,{className:"text-gray-400 w-6 h-6 mx-2"})})]}),!n.username&&Object(f.jsxs)("div",{className:"mx-2 hidden sm:block",children:[Object(f.jsx)(N,{outline:1,className:"mr-1 h-8",onClick:()=>a.setShow("login"),children:"Log In"}),Object(f.jsx)(N,{className:"h-8",onClick:()=>a.setShow("register"),children:"Sign Up"})]}),Object(f.jsxs)(v.a,{onClickOut:()=>t("hidden"),children:[Object(f.jsxs)("button",{className:"rounded-md flex ml-4 border border-gray-700",onClick:()=>{t("hidden"===e?"block":"hidden")},children:[!n.username&&Object(f.jsx)(x.a,{className:"w-6 h-6 text-gray-400 m-1"}),n.username&&Object(f.jsx)("div",{className:"bg-gray-600 rounded-md w-8 h-8",children:Object(f.jsx)("img",{src:p,alt:"",style:{filter:"invert(100%)"},className:"block"})}),Object(f.jsx)(u.a,{className:"text-gray-500 w-5 h-5 mt-2 m-1"})]}),Object(f.jsxs)("div",{className:"absolute right-0 top-8 bg-reddit_dark border border-gray-700 z-10 rounded-md text-reddit_text overflow-hidden "+e,children:[n.username&&Object(f.jsxs)("span",{className:"block w-50 py-2 px-3 text-sm",children:["Hello, ",n.username,"!"]}),!n.username&&Object(f.jsxs)("button",{onClick:()=>a.setShow("login"),className:"block flex w-50 py-2 px-3 hover:bg-gray-300 hover:text-black text-sm",children:[Object(f.jsx)(O.a,{className:"w-5 h-5 mr-2"}),"Log In / Sign Up"]}),n.username&&Object(f.jsxs)("button",{onClick:()=>n.logout(),className:"block flex w-50 py-2 px-3 hover:bg-gray-300 hover:text-black text-sm",children:[Object(f.jsx)(g.a,{className:"w-5 h-5 mr-2"}),"Logout"]})]})]})]})})},C=A(3);var y=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"h-20 bg-cover",style:{backgroundImage:'url("https://styles.redditmedia.com/t5_2qs0q/styles/bannerBackgroundImage_7glcgg5ymxp21.png?width=4000&s=9684bc66e812b8730ad694c3f454da8c00a493d7")'}}),Object(f.jsx)("div",{className:"bg-reddit_dark-brighter",children:Object(f.jsxs)("div",{className:"mx-6 relative flex",children:[Object(f.jsx)("div",{className:"h-20 w-20 rounded-full overflow-hidden relative -top-3 border-4 border-white bg-white",children:Object(f.jsx)("img",{src:"https://styles.redditmedia.com/t5_2qs0q/styles/communityIcon_kxcmzy9bt1381.jpg?width=256&format=pjpg&s=0a2e472f6fae0712fee4a3b5d44920fe35dbcdaa",alt:""})}),Object(f.jsxs)("div",{className:"pt-2 pl-4",children:[Object(f.jsx)("h1",{className:"text-gray-300 text-3xl",children:"webdev: reddit for web developers"}),Object(f.jsx)("h5",{className:"text-gray-500",children:"r/webdev"})]})]})})]})};var I=r.a.createContext({});var Z=function(){const e=Object(s.useContext)(I);return Object(f.jsx)("div",{className:"bg-reddit_dark px-6 py-4 text-gray-400",children:Object(f.jsxs)("div",{className:"border border-reddit_border p-2 rounded-md flex bg-reddit_dark-brighter",children:[Object(f.jsx)("div",{className:"rounded-full bg-gray-600 overflow-hidden w-10 h-10",children:Object(f.jsx)("img",{src:p,alt:"",style:{filter:"invert(100%)"}})}),Object(f.jsx)("form",{action:"",className:"flex-grow bg-reddit_dark-brightest border border-reddit_border ml-4 mr-2 rounded-md",children:Object(f.jsx)("input",{type:"text",onFocus:t=>{t.preventDefault(),e.setShow(!0)},className:"bg-reddit_dark-brightest p-2 px-3 text-sm block w-full rounded-md",placeholder:"New post"})})]})})},G=A(35),L=A(33),q=A.n(L),R=A(34),U=A.n(R);var E=function(e){return Object(f.jsxs)("div",{children:[Object(f.jsxs)("h5",{className:"text-reddit_text-darker text-sm mb-1",children:[" Posted by u/",e.author," ",Object(f.jsx)(G.a,{datetime:e.postedAt})]}),Object(f.jsx)("h2",{className:"text-xl mb-3",children:e.title}),Object(f.jsx)("div",{className:"text-sm leading-6",children:Object(f.jsx)(q.a,{plugins:[U.a],children:e.body})})]})};var K=function(e){let t="block border rounded-md "+(e.open?"":"hover:border-reddit_text cursor-pointer");return e.isListing?t+=" bg-reddit_dark-brighter p-3 mx-6 border-2 border-reddit_border":t+=" border-none",Object(f.jsxs)("div",{className:"text-reddit_text pb-4",children:[e.open&&Object(f.jsx)("div",{className:t,children:Object(f.jsx)(E,{...e})}),!e.open&&Object(f.jsx)(w.b,{to:{pathname:"/comments/"+(e.rootId||e._id),state:{commentId:e.rootId||e._id}},className:t,children:Object(f.jsx)(E,{...e})})]})};var Q=function(){const[e,t]=Object(s.useState)([]);return Object(s.useEffect)((()=>{l.a.get("http://localhost:4000/comments",{withCredentials:!0}).then((e=>t(e.data)))}),[]),Object(f.jsx)("div",{className:"bg-reddit_dark",children:e.map((e=>Object(f.jsx)(K,{...e,isListing:!0})))})};var T=function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)(y,{}),Object(f.jsx)(Z,{}),Object(f.jsx)(Q,{})]})};var J=function(e){return Object(f.jsx)("textarea",{...e,className:"bg-reddit_dark-brighter text-reddit_text p-2 border border-reddit_dark-brightest rounded-md block "+e.className})};var M=function(e){const t=Object(s.useContext)(o),[A,r]=Object(s.useState)("");return Object(f.jsxs)("div",{className:"text-reddit_text",children:[t.username&&e.showAuthor&&Object(f.jsxs)("div",{className:"mb-2",children:["Comment as ",t.username]}),Object(f.jsxs)("form",{onSubmit:t=>function(t){t.preventDefault();const s={body:A,parentId:e.parentId,rootId:e.rootId};l.a.post("http://localhost:4000/comments",s,{withCredentials:!0}).then((t=>{r(""),e.onSubmit&&e.onSubmit()}))}(t),children:[Object(f.jsx)(J,{className:"w-full mb-3 border border-reddit_border",onChange:e=>r(e.target.value),value:A,placeholder:"Your comment. You can use markdown here"}),Object(f.jsxs)("div",{className:"text-right",children:[!!e.onCancel&&Object(f.jsx)(N,{outline:!0,className:"p-2 mr-2",onClick:t=>e.onCancel(),children:"Cancel"}),Object(f.jsx)(N,{className:"p-2",children:"Comment"})]})]})]})};var V=r.a.createContext({});var D=function(e){const t=Object(s.useContext)(V),{commentsTotals:A,userVotes:r}=t,{commentId:c}=e,a=A&&c in A?A[c]:0,d=r&&c in r?r[c]:0;function n(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"up";("up"===A?1:-1)===d&&(A="unvote");const s="http://localhost:4000/vote/"+e.commentId+"/"+A;l.a.get(s,{withCredentials:!0}).then((()=>{t.refreshVotes()}))}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"up";let t="inline-block h-5 relative top-1 ";return t+=("up"===e?1:-1)===d?" text-reddit_red":" text-reddit_text-darker hover:text-white","up"===e?Object(f.jsx)("button",{onClick:()=>{n("up")},className:t,children:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:Object(f.jsx)("path",{fillRule:"evenodd",d:"M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})})}):Object(f.jsx)("button",{onClick:()=>{n("down")},className:t,children:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:Object(f.jsx)("path",{fillRule:"evenodd",d:"M16.707 10.293a1 1 0 010 1.414l-6 6a1 1 0 01-1.414 0l-6-6a1 1 0 111.414-1.414L9 14.586V3a1 1 0 012 0v11.586l4.293-4.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}return Object(f.jsxs)("div",{className:"inline-block mr-2",children:[o("up"),Object(f.jsx)("div",{className:"inline-block",children:a}),o("down")]})};var B=function e(t){const[A,r]=Object(s.useState)(!1),c=t.comments.filter((e=>t.parentId===e.parentId)),a=Object(s.useContext)(V);return Object(f.jsx)("div",{className:"my-2 text-reddit_text",children:c.map((s=>{const c=t.comments.filter((e=>e.parentId===s._id));return Object(f.jsxs)("div",{className:"mb-2",children:[Object(f.jsxs)("div",{className:"flex mb-2",children:[Object(f.jsx)("div",{className:"bg-reddit_text w-10 h-10 rounded-full mr-2"}),Object(f.jsx)("div",{className:"leading-10 pr-2 text-lg font-sans",children:s.author}),Object(f.jsx)(G.a,{className:"leading-10 text-md font-sans",datetime:s.postedAt})]}),Object(f.jsx)("div",{className:"border-l-2 border-reddit_text-darker p-3 pb-0",style:{marginLeft:"18px"},children:Object(f.jsxs)("div",{className:"pl-4 -mt-4",children:[Object(f.jsx)("div",{children:Object(f.jsx)(q.a,{remarkPlugins:[U.a],children:s.body})}),Object(f.jsx)(D,{commentId:s._id}),Object(f.jsx)(N,{type:"button",onClick:()=>r(s._id),className:"bg-reddit_dark-brighter text-reddit_text-darker border-none py-2 pl-0 pr-0",children:"Reply"}),s._id===A&&Object(f.jsx)(M,{parentId:s._id,rootId:t.rootId,onSubmit:()=>{r(!1),a.refreshComments()},showAuthor:!1,onCancel:e=>r(!1)}),c.length>0&&Object(f.jsx)(e,{comments:t.comments,parentId:s._id,rootId:t.rootId})]})})]})}))})};var _=function(e){const[t,A]=Object(s.useState)({}),[r,c]=Object(s.useState)([]),[a,d]=Object(s.useState)(null),[n,o]=Object(s.useState)(null);function i(){l.a.get("http://localhost:4000/comments/root/"+e.id).then((e=>{c(e.data)}))}function b(){const e=[t._id,...r.map((e=>e._id))];l.a.post("http://localhost:4000/votes",{commentsIds:e},{withCredentials:!0}).then((e=>{d(e.data.commentsTotals),o(e.data.userVotes)}))}return Object(s.useEffect)((()=>{e.comment?A(e.comment):l.a.get("http://localhost:4000/comments/"+e.id).then((e=>{A(e.data)})),i()}),[e.id,e.comment]),Object(s.useEffect)((()=>{b()}),[r.length]),Object(f.jsxs)(f.Fragment,{children:[t&&Object(f.jsx)(K,{...t,open:!0}),!!t&&!!t._id&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("hr",{className:"border-reddit_border my-4"}),Object(f.jsx)(M,{onSubmit:()=>i(),rootId:t._id,parentId:t._id,showAuthor:!0}),Object(f.jsx)("hr",{className:"border-reddit_border my-4"}),Object(f.jsx)(V.Provider,{value:{refreshComments:i,refreshVotes:b,commentsTotals:a,userVotes:n},children:Object(f.jsx)(B,{parentId:t._id,rootId:t._id,comments:r})})]})]})};var P=function(e){const t=e.match.params.id;return Object(f.jsx)("div",{className:"py-4 px-6 bg-reddit_dark",children:Object(f.jsx)("div",{className:"bg-reddit_dark-brighter p-3 rounded-md",children:Object(f.jsx)(_,{id:t})})})};var F=function(e){const[t,A]=Object(s.useState)({}),r=e.open?"block":"hidden";return Object(s.useEffect)((()=>{l.a.get("http://localhost:4000/comments/"+e.id).then((e=>{A(e.data)}))}),[e.id]),Object(f.jsx)("div",{className:"w-screen h-screen fixed top-0 left-0 z-20 flex "+r,style:{backgroundColor:"rgba(0,0,0,.8)"},children:Object(f.jsx)("div",{className:"block overflow-scroll",children:Object(f.jsx)(v.a,{onClickOut:()=>(A({}),void e.onClickOut()),children:Object(f.jsx)("div",{className:"border my-4 border-reddit_dark-brightest w-3/4 lg:w-1/2 bg-reddit_dark-brighter text-reddit_text self-center p-4 mx-auto rounded-md",children:Object(f.jsx)("div",{className:"",children:Object(f.jsx)(_,{comment:t,id:e.id})})})})})})};var H=function(e){const{text:t}=e.match.params,[A,r]=Object(s.useState)([]);return Object(s.useEffect)((()=>{l.a.get("http://localhost:4000/comments?search="+t,{withCredentials:!0}).then((e=>r(e.data)))}),[]),Object(f.jsx)("div",{className:"bg-reddit_dark",children:A.map((e=>Object(f.jsx)(K,{...e,isListing:!0})))})};var z=function(){const[e,t]=Object(s.useState)(!1);let A=Object(C.g)(),r=null;return A.state&&A.state.commentId&&(A.pathname="/",e?r=A.state.commentId:A.state.commentId=null),Object(s.useEffect)((()=>{t(!0)}),[r]),Object(s.useEffect)((()=>{r=null}),[e]),Object(f.jsxs)("div",{children:[r&&Object(f.jsx)("div",{children:Object(f.jsx)(F,{id:r,open:e,onClickOut:()=>t(!1)})}),Object(f.jsxs)(C.d,{location:A,children:[Object(f.jsx)(C.b,{exact:!0,path:"/",component:T}),Object(f.jsx)(C.b,{exact:!0,path:"/comments/:id",component:P}),Object(f.jsx)(C.b,{exact:!0,path:"/search/:text",component:H})]})]})};var X=function(e){return Object(f.jsx)("input",{...e,className:"bg-reddit_dark-brighter text-reddit_text p-2 border border-reddit_dark-brightest rounded-md block "+e.className})};var W=function(){const e=Object(s.useContext)(I),t=Object(s.useContext)(d),A=e.show?"block":"hidden",[r,c]=Object(s.useState)(""),[a,n]=Object(s.useState)(""),[o,i]=Object(s.useState)(null);return o?Object(f.jsx)(C.a,{to:"/comments/"+o}):Object(f.jsx)("div",{className:"w-screen h-screen fixed top-0 left-0 z-20 flex "+A,style:{backgroundColor:"rgba(0,0,0,.8)"},children:Object(f.jsx)(v.a,{onClickOut:()=>{},children:Object(f.jsxs)("div",{className:"border border-reddit_dark-brightest w-3/4 md:w-2/4 bg-reddit_dark p-5 text-reddit_text self-center mx-auto rounded-md",children:[Object(f.jsx)("h1",{className:"text-2xl mb-5",children:"Create a post"}),Object(f.jsx)(X,{className:"w-full mb-3",placeholder:"Title",onChange:e=>c(e.target.value),value:r}),Object(f.jsx)(J,{className:"w-full mb-3",placeholder:"Post text (you can use markdown)",onChange:e=>n(e.target.value),value:a}),Object(f.jsxs)("div",{className:"text-right",children:[Object(f.jsx)(N,{onClick:()=>e.setShow(!1),outline:!0,className:"px-4 py-2 mr-3",children:"Cancel"}),Object(f.jsx)(N,{onClick:()=>function(){const e={title:r,body:a};l.a.post("http://localhost:4000/comments",e,{withCredentials:!0}).then((e=>{i(e.data._id)})).catch((e=>{console.log(e),401===e.response.status&&t.setShow("login")}))}(),className:"px-4 py-2",children:"POST"})]})]})})})};var Y=function(){const[e,t]=Object(s.useState)("login"),[A,r]=Object(s.useState)(""),[c,a]=Object(s.useState)(""),[n,i]=Object(s.useState)(""),b=Object(s.useContext)(d),j=Object(s.useContext)(o),m=b.show?"block":"hidden";return b.show&&b.show!==e&&t(b.show),Object(f.jsx)("div",{className:"w-screen h-screen fixed top-0 left-0 z-30 flex "+m,style:{backgroundColor:"rgba(0,0,0,.6)"},children:Object(f.jsx)(v.a,{onClickOut:()=>b.setShow(!1),children:Object(f.jsxs)("div",{className:"border border-reddit_dark-brightest w-3/4 sm:w-1/2 lg:w-1/4 bg-reddit_dark p-5 text-reddit_text self-center mx-auto rounded-md",children:["login"===e&&Object(f.jsx)("h1",{className:"text-2xl mb-5",children:"Login"}),"register"===e&&Object(f.jsx)("h1",{className:"text-2xl mb-5",children:"Sign Up"}),"register"===e&&Object(f.jsxs)("label",{children:[Object(f.jsx)("span",{className:"text-reddit_text-darker text-sm",children:"E-mail:"}),Object(f.jsx)(X,{type:"email",className:"mb-3 w-full",value:A,onChange:e=>r(e.target.value)})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("span",{className:"text-reddit_text-darker text-sm",children:"Username:"}),Object(f.jsx)(X,{type:"text",className:"mb-3 w-full",value:c,onChange:e=>a(e.target.value)})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("span",{className:"text-reddit_text-darker text-sm",children:"Password:"}),Object(f.jsx)(X,{type:"password",className:"mb-3 w-full",value:n,onChange:e=>i(e.target.value)})]}),"login"===e&&Object(f.jsx)(N,{className:"w-full py-2 mb-3",style:{borderRadius:".3rem"},onClick:()=>function(){const e={username:c,password:n};l.a.post("http://localhost:4000/login",e,{withCredentials:!0}).then((()=>{b.setShow(!1),j.setUser({username:c})}))}(),children:"Log In"}),"register"===e&&Object(f.jsx)(N,{className:"w-full py-2 mb-3",style:{borderRadius:".3rem"},onClick:e=>function(e){e.preventDefault();const t={email:A,username:c,password:n};l.a.post("http://localhost:4000/register",t,{withCredentials:!0}).then((()=>{j.setUser({username:c}),b.setShow(!1),r(""),i(""),a("")}))}(e),children:"Sign Up"}),"login"===e&&Object(f.jsxs)("div",{children:["New to Reddit? ",Object(f.jsx)("button",{className:"text-blue-600",onClick:()=>b.setShow("register"),children:"SIGN UP"})]}),"register"===e&&Object(f.jsxs)("div",{children:["Already have an account? ",Object(f.jsx)("button",{className:"text-blue-600",onClick:()=>b.setShow("login"),children:"LOG IN"})]})]})})})};var $=function(){const{redirect:e,setRedirect:t}=Object(s.useContext)(k);return Object(s.useEffect)((()=>{e&&t(!1)}),[e]),Object(f.jsxs)(w.a,{children:[e&&Object(f.jsx)(C.a,{to:e}),!e&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(S,{}),Object(f.jsx)(z,{}),Object(f.jsx)(W,{}),Object(f.jsx)(Y,{})]})]})};var ee=function(){const[e,t]=Object(s.useState)(!1),[A,r]=Object(s.useState)(!1),[c,a]=Object(s.useState)({}),[n,i]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{l.a.get("http://localhost:4000/user",{withCredentials:!0}).then((e=>a(e.data)))}),[]),Object(f.jsx)(d.Provider,{value:{show:e,setShow:t},children:Object(f.jsx)(I.Provider,{value:{show:A,setShow:r},children:Object(f.jsx)(o.Provider,{value:{...c,logout:function(){l.a.post("http://localhost:4000/logout",{},{withCredentials:!0}).then((()=>a({})))},setUser:a},children:Object(f.jsx)(k.Provider,{value:{redirect:n,setRedirect:i},children:Object(f.jsx)($,{})})})})})};a.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(ee,{})}),document.getElementById("root"))},99:function(e,t,A){}},[[254,1,2]]]);
//# sourceMappingURL=main.651d6fd6.chunk.js.map